<ion-content [fullscreen]="true" class="home-container">
  
  <div class="header-section">
    <div class="user-greeting">
      <h1>Olá, {{ nomeUsuario }}</h1>
      <p>O que você gostaria de pedir hoje?</p>
    </div>
    <div class="profile-avatar" (click)="goToProfile()">
      <ion-icon name="person"></ion-icon>
    </div>
  </div>

  <div class="category-tabs">
    <div class="tab-item" 
         [class.active]="selectedCategory === 'comida'" 
         (click)="selectCategory('comida')">
      <span>COMIDA</span>
    </div>
    <div class="tab-item" 
         [class.active]="selectedCategory === 'mercado'" 
         (click)="selectCategory('mercado')">
      <span>MERCADO</span>
    </div>
    <div class="tab-item" 
         [class.active]="selectedCategory === 'farmacia'" 
         (click)="selectCategory('farmacia')">
      <span>FARMÁCIA</span>
    </div>
    <div class="tab-item" 
         [class.active]="selectedCategory === 'construcao'" 
         (click)="selectCategory('construcao')">
      <span>CONSTRUÇÃO</span>
    </div>
  </div>

  <div class="content-section">
    
    <div *ngIf="selectedCategory === 'comida'" class="category-content">
      <div class="section-title">
        <h2>Comida</h2>
        <ion-icon name="restaurant"></ion-icon>
      </div>
      
      <div class="establishments-grid">
        <div *ngFor="let est of estabelecimentos" class="establishment-card" (click)="goToEstablishment(est.id)">
          <div class="card-background mcdonalds">
            <div class="card-content">
              <div class="logo">
                <ion-icon name="storefront-outline"></ion-icon>
              </div>
              <div class="info">
                <h3>{{ est.nome }}</h3>
                <div class="details">
                  <div class="rating">
                    <ion-icon name="star"></ion-icon>
                    <span>4.5</span> </div>
                  <div class="time">
                    <ion-icon name="time-outline"></ion-icon>
                    <span>{{ est.tempo_de_espera || '20-30' }} min</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="selectedCategory === 'mercado'" class="category-content">
      <div class="section-title">
        <h2>Mercado</h2>
        <ion-icon name="storefront"></ion-icon>
      </div>
      
      <div class="establishments-grid">
        <div *ngFor="let est of estabelecimentos" class="establishment-card" (click)="goToEstablishment(est.id)">
          <div class="card-background confianca">
            <div class="card-content">
              <div class="logo">
                <ion-icon name="storefront-outline"></ion-icon>
              </div>
              <div class="info">
                <h3>{{ est.nome }}</h3>
                <div class="details">
                  <div class="rating">
                    <ion-icon name="star"></ion-icon>
                    <span>4.4</span> </div>
                  <div class="time">
                    <ion-icon name="time-outline"></ion-icon>
                    <span>{{ est.tempo_de_espera || '15-25' }} min</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="selectedCategory === 'farmacia'" class="category-content">
      <div class="section-title">
        <h2>Farmácia</h2>
        <ion-icon name="medical"></ion-icon>
      </div>
      
       <div class="establishments-grid">
        <div *ngFor="let est of estabelecimentos" class="establishment-card" (click)="goToEstablishment(est.id)">
          <div class="card-background farmacia">
            <div class="card-content">
              <div class="logo">
                <ion-icon name="medical-outline"></ion-icon>
              </div>
              <div class="info">
                <h3>{{ est.nome }}</h3>
                <div class="details">
                  <div class="rating">
                    <ion-icon name="star"></ion-icon>
                    <span>4.6</span> </div>
                  <div class="time">
                    <ion-icon name="time-outline"></ion-icon>
                    <span>{{ est.tempo_de_espera || '10-20' }} min</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="selectedCategory === 'construcao'" class="category-content">
      <div class="section-title">
        <h2>Construção</h2>
        <ion-icon name="construct"></ion-icon>
      </div>
      
      <div class="establishments-grid">
        <div *ngFor="let est of estabelecimentos" class="establishment-card" (click)="goToEstablishment(est.id)">
          <div class="card-background construcao">
            <div class="card-content">
              <div class="logo">
                <ion-icon name="construct-outline"></ion-icon>
              </div>
              <div class="info">
                <h3>{{ est.nome }}</h3>
                <div class="details">
                  <div class="rating">
                    <ion-icon name="star"></ion-icon>
                    <span>4.3</span> </div>
                  <div class="time">
                    <ion-icon name="time-outline"></ion-icon>
                    <span>{{ est.tempo_de_espera || '40-60' }} min</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="fixed-bottom-nav">
    <div class="nav-content">
      <div class="nav-item active" (click)="goToTab('home')">
        <ion-icon name="home"></ion-icon>
        <span>Início</span>
      </div>
      
      <div class="nav-item" (click)="goToTab('search')">
        <ion-icon name="search"></ion-icon>
        <span>Buscar</span>
      </div>
      
       <div class="nav-item" [routerLink]="['/sacola']">
        <ion-icon name="bag-handle"></ion-icon>
        <span>Sacola</span>
      </div>
      
      <div class="nav-item" (click)="goToTab('profile')">
        <ion-icon name="person"></ion-icon>
        <span>Perfil</span>
      </div>
    </div>
  </div>

</ion-content>